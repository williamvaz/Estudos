<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b3b22" />

  <title>Estudos Futebol ‚Ä¢ In√≠cio</title>

  <!-- MUITO IMPORTANTE NO GITHUB PAGES -->
  <!-- Garante que todos os caminhos relativos resolvam sob /Estudos/ -->
  <base href="/Estudos/">

  <!-- √çcones -->
  <link rel="icon" type="image/png" href="icone.webp" />
  <link rel="apple-touch-icon" href="icone.webp" />

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Copa English">

  <style>
    :root{
      --turf:#0e2a12; --turf2:#144e1f; --line:#c8facc;
      --panel:#0f172a; --muted:#98a3b0; --text:#ecf2f7;
      --accent:#22c55e; --accent-2:#38bdf8; --danger:#ef4444;
      --radius:16px; --soft:20px; --shadow:0 14px 36px rgba(0,0,0,.35);
      --touch:56px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      font:500 16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Open Sans","Helvetica Neue",Arial;
      background:
        radial-gradient(1200px 800px at 80% -30%, rgba(56,189,248,.12), transparent 60%),
        linear-gradient(180deg, rgba(34,197,94,.05), transparent 40%),
        repeating-linear-gradient(90deg, var(--turf) 0 56px, var(--turf2) 56px 112px);
    }
    .app{max-width:640px;margin:0 auto;padding:env(safe-area-inset-top) 16px env(safe-area-inset-bottom)}
    .topbar{
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius); padding:12px 14px; margin:16px 0;
      box-shadow:var(--shadow)
    }
    .brand{display:flex;align-items:center;gap:10px}
    .brand h1{font-size:1.25rem;margin:0}
    .ball{font-size:26px}
    .menu-grid{
      display:grid; gap:14px;
      grid-template-columns:repeat(2,minmax(0,1fr));
    }
    .menu-card{
      min-height:128px; padding:14px; width:100%;
      display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-start;
      border-radius:var(--soft); cursor:pointer; text-align:left;
      border:1px solid rgba(255,255,255,.10);
      background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.02));
      box-shadow:var(--shadow);
      transition:transform .15s ease, filter .15s ease;
      color:#fff; text-decoration:none;
    }
    .menu-card:active{transform:scale(.98)}
    .menu-card:hover{filter:brightness(1.05)}
    .menu-card .icon{font-size:28px;margin-bottom:8px}
    .menu-card .title{font-weight:800;font-size:1.05rem;margin-bottom:4px}
    .menu-card .descr{color:var(--muted);font-size:.92rem}
    @media (max-width:360px){ .menu-grid{grid-template-columns:1fr} }
    button{min-height:var(--touch); -webkit-tap-highlight-color: transparent;}

    /* Modal ‚Äúpadr√£o site‚Äù para instalar */
    .pwa-modal-backdrop{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background:rgba(0,0,0,.45); z-index:10000;
    }
    .pwa-modal{
      width:min(480px,calc(100% - 32px));
      background:#12382a; color:#fff; border-radius:14px;
      border:1px solid rgba(255,255,255,.15);
      box-shadow:0 20px 60px rgba(0,0,0,.5);
      padding:16px;
    }
    .pwa-modal header{display:flex;align-items:center;gap:10px;margin-bottom:8px}
    .pwa-modal header img{width:36px;height:36px;border-radius:9px}
    .pwa-modal h3{margin:0;font-size:1.05rem}
    .pwa-modal p{margin:.25rem 0 .75rem;color:#cfe9d7}
    .pwa-modal .actions{display:flex;gap:10px;justify-content:flex-end}
    .btn{border:0; padding:10px 14px; border-radius:10px; cursor:pointer; font-weight:700}
    .btn-secondary{background:#2a2a2a;color:#fff}
    .btn-primary{background:#2fd47a;color:#092015}
    @media (display-mode: standalone) {
      .pwa-modal-backdrop{display:none !important;}
    }
  </style>
</head>
<body class="is-mobile">
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <span class="ball" aria-hidden="true">‚öΩ</span>
        <h1 class="brand-title">Copa English</h1>
      </div>
    </header>

    <section class="menu-grid" aria-label="A√ß√µes principais">
      <a class="menu-card" href="campeonato.html">
        <div class="icon">üèÜ</div><div class="title">Jogar</div>
        <div class="descr">Inicie um campeonato</div>
      </a>
      <a class="menu-card" href="selecoes.html">
        <div class="icon">üåç</div><div class="title">Lista de Sele√ß√µes</div>
        <div class="descr">Bandeiras, score e atributos</div>
      </a>
      <a class="menu-card" href="palavras.html">
        <div class="icon">üìö</div><div class="title">Registrar Vencedores</div>
        <div class="descr">Salve os ganhadores</div>
      </a>
      <a class="menu-card" href="edicoes.html">
        <div class="icon">üìú</div><div class="title">Hist√≥rico de Edi√ß√µes</div>
        <div class="descr">Anfitri√µes e campe√µes</div>
      </a>
    </section>
  </div>

  <!-- Modal ‚ÄúDeseja instalar?‚Äù -->
  <div id="pwaAsk" class="pwa-modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="pwaTitle">
    <div class="pwa-modal">
      <header>
        <img src="icone.webp" alt="" />
        <h3 id="pwaTitle">Instalar ‚ÄúCopa English‚Äù?</h3>
      </header>
      <p>Fica mais r√°pido no seu S23 e abre em tela cheia.</p>
      <div class="actions">
        <button id="pwaNo" class="btn btn-secondary">Agora n√£o</button>
        <button id="pwaYes" class="btn btn-primary">Sim, instalar</button>
      </div>
    </div>
  </div>

  <script>
  // ====== PWA ======
  // Registra o Service Worker no MESMO diret√≥rio do app (escopo /Estudos/)
  if ('serviceWorker' in navigator) {
    // usar caminho relativo para herdar escopo da pasta /Estudos/
    navigator.serviceWorker.register('./sw.js').catch(console.error);
  }

  // Prompt nativo
  let deferredPrompt = null;
  const askEl = document.getElementById('pwaAsk');
  const btnYes = document.getElementById('pwaYes');
  const btnNo  = document.getElementById('pwaNo');

  const KEY_HIDE = 'pwaAskHide'; // 1 = n√£o mostrar por 7 dias
  const KEY_TS   = 'pwaAskTs';

  function isStandalone() {
    return window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone;
  }
  function isMobile() {
    return /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
  }
  function shouldShowAsk() {
    const hide = localStorage.getItem(KEY_HIDE) === '1';
    const ts = Number(localStorage.getItem(KEY_TS) || 0);
    const sevenDays = 7 * 24 * 60 * 60 * 1000;
    if (!hide) return true;
    return (Date.now() - ts) > sevenDays; // volta a perguntar ap√≥s 7 dias
  }
  function showAsk() {
    askEl.style.display = 'flex';
  }
  function hideAsk(persist=false) {
    askEl.style.display = 'none';
    if (persist) {
      localStorage.setItem(KEY_HIDE, '1');
      localStorage.setItem(KEY_TS, String(Date.now()));
    }
  }

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;

    // S√≥ faz sentido em mobile, n√£o instalado e respeitando "lembrar depois"
    if (isMobile() && !isStandalone() && shouldShowAsk()) {
      showAsk();
    }
  });

  btnYes?.addEventListener('click', async () => {
    hideAsk(true);
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    try { await deferredPrompt.userChoice; } finally { deferredPrompt = null; }
  });

  btnNo?.addEventListener('click', () => hideAsk(true));

  window.addEventListener('appinstalled', () => hideAsk(true));
  </script>
</body>
</html>
